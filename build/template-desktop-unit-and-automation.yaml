# Unit tests require .NET 3.x
steps:
- task: UseDotNet@2
  displayName: 'Use .Net Core SDK 3.x'
  inputs:
    version: 3.x

# Unit tests require .NET 5.x
- task: UseDotNet@2
  displayName: 'Use .Net Core SDK 5.x'
  inputs:
    version: 5.x

- task: UseDotNet@2
  displayName: 'Use .Net Core SDK 6.x'
  inputs:
    version: 6.x

- task: VisualStudioTestPlatformInstaller@1
  inputs:
    versionSelector: 'latestStable' # Required when packageFeedSelector == NugetOrg || PackageFeedSelector == CustomFeed# Options: latestPreRelease, latestStable, specificVersion

- task: DownloadPipelineArtifact@2
  displayName: 'Download Drop'
  inputs:
    artifact: drop
    patterns: '**/msalTests/**/*'
    path: $(Build.artifactstagingdirectory)/drop

- task: CopyFiles@2
  displayName: 'Get MSAL tests'
  inputs:
    SourceFolder: '$(build.artifactstagingdirectory)\drop\msalTests' 
    Contents: '**\*'
    TargetFolder: $(Build.SourcesDirectory)\tests\

  # Run All Desktop Tests
- template: template-run-all-tests.yaml
  parameters:
    BuildConfiguration: '$(BuildConfiguration)'
